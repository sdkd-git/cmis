{"version":3,"sources":["../../src/routes/criminal.js"],"names":["multer","require","path","storage","diskStorage","destination","req","file","cb","filename","fieldname","Date","now","extname","originalname","upload","single","module","exports","app","post","createCriminalInformation","get","getCriminalsById","getCriminalsTableInfoById","put","updateCriminal","res","next","console","log","send"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AAOA;;;;AAGA,IAAIA,SAAUC,QAAQ,QAAR,CAAd;AACA,IAAIC,OAAQD,QAAQ,MAAR,CAAZ;AACA;AACA,IAAME,UAAUH,OAAOI,WAAP,CAAmB;AAC/BC,iBAAa,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAClCA,WAAG,IAAH,EAAS,eAAT;AACH,KAH8B;;AAK/B;AACAC,cAAU,kBAAUH,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAC/BA,WAAG,IAAH,EAASD,KAAKG,SAAL,GAAiB,GAAjB,GAAuBC,KAAKC,GAAL,EAAvB,GAAoCV,KAAKW,OAAL,CAAaN,KAAKO,YAAlB,CAA7C;AACH;AAR8B,CAAnB,CAAhB;AAUA,IAAIC,SAASf,OAAO;AAChBG,aAASA;AADO,CAAP,EAEVa,MAFU,CAEH,OAFG,CAAb;;AAKAC,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAS;AACtBA,QAAIC,IAAJ,CAAS,sBAAT,EACIC,8CADJ;;AAGAF,QAAIG,GAAJ,CAAQ,mCAAR,EACIC,qCADJ;;AAGAJ,QAAIG,GAAJ,CAAQ,6CAAR,EACIE,8CADJ;;AAGAL,QAAIM,GAAJ,CAAQ,0BAAR,EACIC,mCADJ;;AAGA;AACAP,QAAIC,IAAJ,CAAS,4BAAT,EAAuCL,MAAvC,EAA+C,UAAUT,GAAV,EAAeqB,GAAf,EAAoBC,IAApB,EAA0B;AACrEC,gBAAQC,GAAR,CAAYxB,IAAIC,IAAhB;AACA;AACA;AACAoB,YAAII,IAAJ,CAASzB,IAAIC,IAAb;AAED,KANH;AAOH,CArBD","file":"criminal.js","sourcesContent":["import passport from 'passport';\r\nimport config from '../config/config';\r\nimport {\r\n    createCriminalInformation,\r\n    getCriminalsById,\r\n    updateCriminal,\r\n    getCriminalsTableInfoById,\r\n    uploadImages\r\n} from '../controllers/criminalInformation';\r\nimport {\r\n    allowOnly\r\n} from '../services/routesHelper';\r\nvar multer  = require('multer')\r\nvar path  = require('path')\r\n// var upload = multer({ dest: 'uploads/' })\r\nconst storage = multer.diskStorage({\r\n    destination: function (req, file, cb) {\r\n        cb(null, 'build/uploads');\r\n    },\r\n\r\n    // By default, multer removes file extensions so let's add them back\r\n    filename: function (req, file, cb) {\r\n        cb(null, file.fieldname + '-' + Date.now() + path.extname(file.originalname));\r\n    }\r\n});\r\nlet upload = multer({\r\n    storage: storage,\r\n}).single('image')\r\n\r\n \r\nmodule.exports = (app) => {\r\n    app.post('/api/criminal/create',\r\n        createCriminalInformation);\r\n\r\n    app.get('/api/criminal/getcriminalbyid/:id',\r\n        getCriminalsById);\r\n\r\n    app.get('/api/criminal/getCriminalsTableInfoById/:id',\r\n        getCriminalsTableInfoById);\r\n\r\n    app.put('/api/criminal/update/:id',\r\n        updateCriminal);\r\n\r\n    // app.post('/api/criminal/uploadImages', uploadImages)\r\n    app.post('/api/criminal/uploadImages', upload, function (req, res, next) {\r\n        console.log(req.file)\r\n        // req.file is the `avatar` file\r\n        // req.body will hold the text fields, if there were any\r\n        res.send(req.file);\r\n        \r\n      })\r\n}"]}